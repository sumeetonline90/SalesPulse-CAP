//@ui5-bundle com/sap/salespulse/salespulseui/Component-preload.js
sap.ui.predefine("com/sap/salespulse/salespulseui/Component", ["sap/ui/core/UIComponent","sap/ui/model/odata/v4/ODataModel","com/sap/salespulse/salespulseui/model/models"],(e,t,s)=>{"use strict";return e.extend("com.sap.salespulse.salespulseui.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init(){e.prototype.init.apply(this,arguments);this.setModel(s.createDeviceModel(),"device");this._initializeODataModel();this.getRouter().initialize()},_initializeODataModel(){const e=this.getManifest();const s=e["sap.app"].dataSources.mainService;const i=new t({serviceUrl:s.uri,operationMode:"Server",autoExpandSelect:true,earlyRequests:true});this.setModel(i)}})});
sap.ui.predefine("com/sap/salespulse/salespulseui/controller/App.controller", ["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("com.sap.salespulse.salespulseui.controller.App",{onInit(){}})});
sap.ui.predefine("com/sap/salespulse/salespulseui/controller/Main.controller", ["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/m/MessageBox","sap/ui/model/json/JSONModel","sap/m/Dialog","sap/m/Button","sap/m/Input","sap/m/DatePicker","sap/m/Select","sap/ui/core/Item"],(e,t,r,s,o,a,n,i,l,d)=>{"use strict";return e.extend("com.sap.salespulse.salespulseui.controller.Main",{onInit(){this.getView().setModel(new s,"viewModel");this.refreshSalesData();this.refreshChart()},onFileChange(e){const r=this.byId("fileUploader");const s=r.getDomRef();const o=s.querySelector('input[type="file"]');const a=this.byId("uploadButton");if(o&&o.files&&o.files.length>0){const e=o.files[0];a.setEnabled(true);t.show("File selected: "+e.name)}else{a.setEnabled(false)}},async onUpload(e){if(e&&e.preventDefault){e.preventDefault()}if(e&&e.stopPropagation){e.stopPropagation()}const r=this.byId("fileUploader");const s=r.getDomRef();const o=s.querySelector('input[type="file"]');if(!o||!o.files||o.files.length===0){t.show("Please select a file first");return}const a=o.files[0];if(!a.name.toLowerCase().endsWith(".xlsx")){t.show("Please select an Excel file (.xlsx)");return}t.show("Uploading file...");try{const e=await this.readFileAsBase64(a);const s=await fetch("/odata/v4/sales-service/",{method:"HEAD",headers:{"x-csrf-token":"Fetch"},credentials:"include"});const o=s.headers.get("x-csrf-token");if(!o){throw new Error("Failed to fetch CSRF token")}const n=await fetch("/odata/v4/sales-service/uploadExcel",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","x-csrf-token":o},credentials:"include",body:JSON.stringify({excel:e})});if(!n.ok){throw new Error(`HTTP ${n.status}: ${n.statusText}`)}const i=await n.json();const l=i.value||i||"File uploaded successfully!";t.show(l);const d=this.byId("salesTable");if(d){d.removeAllItems()}setTimeout(()=>{this.refreshSalesData()},1500);r.clear();this.byId("uploadButton").setEnabled(false)}catch(e){console.error("Upload error:",e);t.show("Upload failed: "+e.message)}},readFileAsBase64(e){return new Promise((t,r)=>{const s=new FileReader;s.onload=e=>{try{const r=e.target.result.split(",")[1];t(r)}catch(e){r(new Error("Error processing file: "+e.message))}};s.onerror=()=>{r(new Error("Error reading file"))};s.readAsDataURL(e)})},onTypeMissmatch(e){t.show("Please select an Excel file (.xlsx)")},onRefresh(){this.refreshSalesData()},async onAddSampleData(){try{const e=this.getView().getModel();const r=await e.callFunction("/addSampleData");if(r){t.show(r);await this.refreshSalesData();await this.refreshChart()}}catch(e){console.error("Error adding sample data:",e);t.show("Error adding sample data: "+e.message)}},async refreshSalesData(){try{const e=this.getView().getModel();const r=this.byId("salesTable");if(e&&r){r.removeAllItems();await e.refresh();const t=r.getBinding("items");if(t){t.refresh()}}else{t.show("Error: Unable to refresh data - model or table not found")}}catch(e){console.error("Error refreshing sales data:",e);t.show("Error refreshing data: "+e.message)}},onCreateOrder(){this._showOrderDialog()},onEditOrder(e){const t=e.getSource().getBindingContext();if(t){const e=t.getObject();this._showOrderDialog(e)}},onDeleteOrder(e){const t=e.getSource().getBindingContext();if(t){const e=t.getObject();r.confirm(`Are you sure you want to delete order ${e.OrderID}?`,{title:"Delete Order",onClose:t=>{if(t===r.Action.OK){this._deleteOrder(e)}}})}},_showOrderDialog(e=null){const t=!!e;const r=new o({title:t?"Edit Order":"Create New Order",contentWidth:"500px",content:[new n({id:"orderIdInput",placeholder:"Order ID",value:e?.OrderID||"",enabled:!t}),new n({id:"regionInput",placeholder:"Region",value:e?.Region||""}),new n({id:"countryInput",placeholder:"Country",value:e?.Country||""}),new n({id:"productInput",placeholder:"Product",value:e?.Product||""}),new n({id:"revenueInput",placeholder:"Revenue",value:e?.Revenue||"",type:"Number"}),new i({id:"orderDateInput",placeholder:"Order Date",value:e?.OrderDate||new Date})],beginButton:new a({text:t?"Update":"Create",type:"Emphasized",press:()=>{this._saveOrder(e);r.close()}}),endButton:new a({text:"Cancel",press:()=>r.close()})});r.open()},async _saveOrder(e){try{const r=this.byId("orderIdInput").getValue();const s=this.byId("regionInput").getValue();const o=this.byId("countryInput").getValue();const a=this.byId("productInput").getValue();const n=parseFloat(this.byId("revenueInput").getValue());const i=this.byId("orderDateInput").getValue();if(!r||!s||!o||!a||!n||!i){t.show("Please fill in all fields");return}const l={OrderID:r,Region:s,Country:o,Product:a,Revenue:n,OrderDate:i};const d=this.getView().getModel();if(e){await d.update(`/SalesOrders(${e.ID})`,l);t.show("Order updated successfully")}else{await d.create("/SalesOrders",l);t.show("Order created successfully")}await this.refreshSalesData();await this.refreshChart()}catch(e){console.error("Error saving order:",e);t.show("Error saving order: "+e.message)}},async _deleteOrder(e){try{const r=this.getView().getModel();await r.remove(`/SalesOrders(${e.ID})`);t.show("Order deleted successfully");await this.refreshSalesData();await this.refreshChart()}catch(e){console.error("Error deleting order:",e);t.show("Error deleting order: "+e.message)}},async onRefreshChart(){await this.refreshChart()},async refreshChart(){try{const e=this.getView().getModel();const t=await e.callFunction("/getGeographyData");if(t&&t.length>0){this._renderPieChart(t)}else{this._showNoDataMessage()}}catch(e){console.error("Error refreshing chart:",e);this._showNoDataMessage()}},_renderPieChart(e){const t=document.getElementById("chartContainer");if(!t)return;const r=e.reduce((e,t)=>e+parseFloat(t.totalRevenue),0);let s='<div style="display: flex; flex-wrap: wrap; justify-content: center; align-items: center; height: 100%;">';e.forEach((e,t)=>{const o=(parseFloat(e.totalRevenue)/r*100).toFixed(1);const a=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F"];const n=a[t%a.length];s+=`\n                    <div style="display: flex; flex-direction: column; align-items: center; margin: 10px; padding: 15px; border-radius: 10px; background: ${n}20; border: 2px solid ${n}; min-width: 120px;">\n                        <div style="width: 40px; height: 40px; border-radius: 50%; background: ${n}; margin-bottom: 8px;"></div>\n                        <div style="font-weight: bold; font-size: 14px; color: #333; text-align: center;">${e.region}</div>\n                        <div style="font-size: 12px; color: #666; text-align: center;">${e.country}</div>\n                        <div style="font-weight: bold; font-size: 16px; color: #333; margin-top: 5px;">$${e.totalRevenue}</div>\n                        <div style="font-size: 12px; color: #666;">${o}%</div>\n                        <div style="font-size: 10px; color: #888;">${e.recordCount} orders</div>\n                    </div>\n                `});s+="</div>";t.innerHTML=s},_showNoDataMessage(){const e=document.getElementById("chartContainer");if(e){e.innerHTML=`\n                    <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; color: #666;">\n                        <div style="font-size: 48px; margin-bottom: 16px;">ðŸ“Š</div>\n                        <div style="font-size: 18px; font-weight: bold; margin-bottom: 8px;">No Data Available</div>\n                        <div style="font-size: 14px; text-align: center;">Upload some sales data to see the geography distribution chart</div>\n                    </div>\n                `}}})});
sap.ui.predefine("com/sap/salespulse/salespulseui/model/models", ["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
sap.ui.require.preload({
	"com/sap/salespulse/salespulseui/i18n/i18n.properties":'# This is the resource bundle for com.sap.salespulse.salespulseui\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=SalesPulse Analytics\n\n#YDES: Application description\nappDescription=An SAP Fiori application.\r\n#XTIT: Main view title\ntitle=SalesPulse Analytics',
	"com/sap/salespulse/salespulseui/manifest.json":'{"_version":"1.76.0","sap.app":{"id":"com.sap.salespulse.salespulseui","type":"application","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""]},"applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.18.6","toolsId":"69a126b9-c9e5-4b00-9e0d-4cffb7d98405"},"dataSources":{"mainService":{"uri":"/odata/v4/sales-service/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.140.0","libs":{"sap.m":{},"sap.ui.core":{},"sap.ui.unified":{},"sap.ui.layout":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"com.sap.salespulse.salespulseui.i18n.i18n","supportedLocales":[""]}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlAggregation":"pages","controlId":"app","transition":"slide","type":"View","viewType":"XML","path":"com.sap.salespulse.salespulseui.view","async":true,"viewPath":"com.sap.salespulse.salespulseui.view"},"routes":[{"name":"RouteMain","pattern":":?query:","target":["TargetMain"]}],"targets":{"TargetMain":{"id":"Main","name":"Main"}}},"rootView":{"viewName":"com.sap.salespulse.salespulseui.view.App","type":"XML","id":"App","async":true}}}',
	"com/sap/salespulse/salespulseui/view/App.view.xml":'<mvc:View controllerName="com.sap.salespulse.salespulseui.controller.App"\n    displayBlock="true"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><App id="app"></App></mvc:View>',
	"com/sap/salespulse/salespulseui/view/Main.view.xml":'<mvc:View controllerName="com.sap.salespulse.salespulseui.controller.Main"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"\n    xmlns:unified="sap.ui.unified"\n    xmlns:core="sap.ui.core"\n    xmlns:layout="sap.ui.layout"><Page id="page"><customHeader><Bar><contentLeft><HBox alignItems="Center" class="sapUiSmallMarginEnd"><core:HTML content="&lt;div style=\'display: flex; align-items: center; margin-right: 10px;\'&gt;&lt;div style=\'display: flex; flex-direction: column; margin-right: 8px;\'&gt;&lt;div style=\'width: 20px; height: 5px; background: #4FC3F7; border-radius: 3px; margin-bottom: 2px; transform: rotate(-5deg);\'&gt;&lt;/div&gt;&lt;div style=\'width: 22px; height: 5px; background: #81C784; border-radius: 3px; margin-bottom: 2px; transform: rotate(2deg);\'&gt;&lt;/div&gt;&lt;div style=\'width: 24px; height: 5px; background: #FF7043; border-radius: 3px; transform: rotate(-2deg);\'&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=\'font-family: Arial, sans-serif; font-weight: bold; color: #1976D2; font-size: 16px;\'&gt;&lt;span style=\'color: #0D47A1;\'&gt;I&lt;/span&gt;&lt;span style=\'color: #42A5F5;\'&gt;NN&lt;/span&gt;&lt;span style=\'color: #42A5F5; position: relative;\'&gt;O&lt;span style=\'position: absolute; top: -1px; left: 50%; transform: translateX(-50%); font-size: 6px; color: #666;\'&gt;â—&lt;/span&gt;&lt;/span&gt;&lt;span style=\'color: #0D47A1; transform: scaleY(1.2);\'&gt;âœ“&lt;/span&gt;&lt;span style=\'color: #42A5F5;\'&gt;AL&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;"/><core:Icon src="sap-icon://line-charts" size="1.5rem" color="#1976D2"/></HBox></contentLeft><contentMiddle><Title text="SalesPulse Analytics Dashboard" level="H1"/></contentMiddle></Bar></customHeader><content><VBox class="sapUiMediumMargin"><layout:Grid defaultSpan="XL6 L6 M12 S12" class="sapUiMediumMarginBottom"><layout:content><Panel class="sapUiResponsiveMargin"><content><VBox alignItems="Center" justifyContent="Center" class="sapUiLargeMargin"><VBox alignItems="Center" class="sapUiMediumMarginBottom"><core:HTML content="&lt;div style=\'display: flex; align-items: center; margin-bottom: 20px;\'&gt;&lt;div style=\'display: flex; flex-direction: column; margin-right: 15px;\'&gt;&lt;div style=\'width: 30px; height: 8px; background: #4FC3F7; border-radius: 4px; margin-bottom: 4px; transform: rotate(-5deg);\'&gt;&lt;/div&gt;&lt;div style=\'width: 35px; height: 8px; background: #81C784; border-radius: 4px; margin-bottom: 4px; transform: rotate(2deg);\'&gt;&lt;/div&gt;&lt;div style=\'width: 40px; height: 8px; background: #FF7043; border-radius: 4px; transform: rotate(-2deg);\'&gt;&lt;/div&gt;&lt;/div&gt;&lt;div style=\'font-family: Arial, sans-serif; font-weight: bold; color: #1976D2;\'&gt;&lt;span style=\'color: #0D47A1; font-size: 24px;\'&gt;I&lt;/span&gt;&lt;span style=\'color: #42A5F5; font-size: 20px;\'&gt;NN&lt;/span&gt;&lt;span style=\'color: #42A5F5; font-size: 20px; position: relative;\'&gt;O&lt;span style=\'position: absolute; top: -2px; left: 50%; transform: translateX(-50%); font-size: 8px; color: #666;\'&gt;â—&lt;/span&gt;&lt;/span&gt;&lt;span style=\'color: #0D47A1; font-size: 24px; transform: scaleY(1.2);\'&gt;âœ“&lt;/span&gt;&lt;span style=\'color: #42A5F5; font-size: 20px;\'&gt;AL&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;"/><Text text="INNOVATION &amp; VALUE" \n                                              textAlign="Center" \n                                              class="sapUiTinyMarginTop"\n                                              style="font-size: 10px; color: #666;"/></VBox><core:HTML content="&lt;svg width=\'120\' height=\'120\' viewBox=\'0 0 24 24\' xmlns=\'http://www.w3.org/2000/svg\'&gt;&lt;path fill=\'#1976D2\' d=\'M5 19h14a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2zm1-8h2v6H6v-6zm3 2h2v4H9v-4zm3-4h2v8h-2V9zm3 2h2v6h-2v-6z\'/&gt;&lt;/svg&gt;"/><Title text="SalesPulse Analytics" level="H2" class="sapUiSmallMarginTop"/><Text text="Powered by INNOVAL - Upload your sales data to get instant insights and analytics" \n                                          textAlign="Center" \n                                          class="sapUiMediumMarginTop"/></VBox></content></Panel><Panel class="sapUiResponsiveMargin"><headerToolbar><Toolbar><core:Icon src="sap-icon://upload" size="1.5rem" color="#007bff"/><Title text="Upload Sales Data" level="H3" class="sapUiSmallMarginBegin"/></Toolbar></headerToolbar><content><VBox class="sapUiMediumMargin"><Label text="Select Excel File (.xlsx)" \n                                           class="sapUiSmallMarginBottom"\n                                           design="Bold"/><unified:FileUploader \n                                        id="fileUploader"\n                                        name="excelFile"\n                                        tooltip="Upload your Excel file here"\n                                        change="onFileChange"\n                                        typeMissmatch="onTypeMissmatch"\n                                        style="Emphasized"\n                                        fileType="xlsx"\n                                        placeholder="Choose Excel file..."\n                                        class="sapUiMediumMarginBottom"/><Button \n                                        id="uploadButton"\n                                        text="Upload Data"\n                                        type="Emphasized"\n                                        icon="sap-icon://upload-to-cloud"\n                                        press="onUpload"\n                                        enabled="false"\n                                        class="sapUiSmallMarginTop"\n                                        width="100%"/></VBox></content></Panel></layout:content></layout:Grid><layout:Grid defaultSpan="XL6 L6 M12 S12" class="sapUiMediumMarginBottom"><layout:content><Panel class="sapUiResponsiveMargin"><headerToolbar><Toolbar><core:Icon src="sap-icon://table-view" size="1.5rem" color="#007bff"/><Title text="Sales Orders Data" level="H3" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><Button \n                                        icon="sap-icon://add"\n                                        press="onCreateOrder"\n                                        tooltip="Add New Order"\n                                        type="Emphasized"\n                                        class="sapUiTinyMarginEnd"/><Button \n                                        icon="sap-icon://database"\n                                        press="onAddSampleData"\n                                        tooltip="Add Sample Data"\n                                        type="Accept"\n                                        class="sapUiTinyMarginEnd"/><Button \n                                        icon="sap-icon://refresh"\n                                        press="onRefresh"\n                                        tooltip="Refresh Data"\n                                        type="Transparent"/></Toolbar></headerToolbar><content><Table \n                            id="salesTable"\n                            items="{/SalesOrders}"\n                            growing="true"\n                            growingThreshold="20"\n                            class="sapUiResponsiveMargin"><columns><Column><Text text="Order ID" design="Bold"/></Column><Column><Text text="Region" design="Bold"/></Column><Column><Text text="Country" design="Bold"/></Column><Column><Text text="Product" design="Bold"/></Column><Column><Text text="Revenue" design="Bold"/></Column><Column><Text text="Order Date" design="Bold"/></Column><Column><Text text="Actions" design="Bold"/></Column></columns><items><ColumnListItem><Text text="{OrderID}"/><Text text="{Region}"/><Text text="{Country}"/><Text text="{Product}"/><ObjectNumber \n                                        number="{Revenue}" \n                                        unit="USD"\n                                        state="Success"\n                                        emphasized="true"/><Text text="{path: \'OrderDate\', type: \'sap.ui.model.type.Date\', formatOptions: { style: \'medium\' }}"/><HBox justifyContent="End"><Button \n                                            icon="sap-icon://edit"\n                                            press="onEditOrder"\n                                            tooltip="Edit Order"\n                                            type="Transparent"\n                                            class="sapUiTinyMarginEnd"/><Button \n                                            icon="sap-icon://delete"\n                                            press="onDeleteOrder"\n                                            tooltip="Delete Order"\n                                            type="Transparent"/></HBox></ColumnListItem></items></Table></content></Panel><Panel class="sapUiResponsiveMargin"><headerToolbar><Toolbar><core:Icon src="sap-icon://pie-chart" size="1.5rem" color="#007bff"/><Title text="Geography Distribution" level="H3" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><Button \n                                        icon="sap-icon://refresh"\n                                        press="onRefreshChart"\n                                        tooltip="Refresh Chart"\n                                        type="Transparent"/></Toolbar></headerToolbar><content><VBox alignItems="Center" justifyContent="Center" class="sapUiLargeMargin"><core:HTML id="pieChartContainer" \n                                               content="&lt;div id=\'chartContainer\' style=\'width: 100%; height: 300px;\'&gt;&lt;/div&gt;"/></VBox></content></Panel></layout:content></layout:Grid></VBox></content></Page></mvc:View>'
});
//# sourceMappingURL=Component-preload.js.map
